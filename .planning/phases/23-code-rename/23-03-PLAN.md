---
phase: 23-code-rename
plan: 03
type: execute
---

<objective>
Rename Tank dimension constants and coordinate system variables.

Purpose: Establish Tank terminology for the play area (cylinder/grid system).
Output: All dimension constants and coordinate variables use Tank naming.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/GLOSSARY.md
@.planning/phases/23-code-rename/23-02-SUMMARY.md

**Key files to modify:**
@constants.ts - Dimension constants
@core/coordinateTransform.ts - boardOffset, viewport refs
@core/coordinates.ts - Coordinate utilities
@core/gameLogic.ts - Grid operations
@components/GameBoard.tsx - Display logic

**Migration targets:**
- TOTAL_WIDTH -> TANK_WIDTH (57 refs)
- TOTAL_HEIGHT -> TANK_HEIGHT (58 refs)
- VISIBLE_WIDTH -> TANK_VIEWPORT_WIDTH (40 refs)
- VISIBLE_HEIGHT -> TANK_VIEWPORT_HEIGHT (18 refs)
- boardOffset -> tankRotation (52 refs)
- viewport -> tankViewport (13 source refs, ignore node_modules)
- GridCell -> TankCell (33 refs)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename dimension constants</name>
  <files>constants.ts, all files importing these constants</files>
  <action>
    1. In constants.ts, rename the exports:
       - TOTAL_WIDTH -> TANK_WIDTH
       - TOTAL_HEIGHT -> TANK_HEIGHT
       - VISIBLE_WIDTH -> TANK_VIEWPORT_WIDTH
       - VISIBLE_HEIGHT -> TANK_VIEWPORT_HEIGHT

    2. Update all imports and usages across the codebase:
       - Heavy files: GameBoard.tsx (21), gameLogic.ts (9), coordinateTransform.ts (5)
       - Use IDE find-replace or sed carefully

    Note: These are widely used constants. Expect TypeScript to catch all broken references.
  </action>
  <verify>grep -rE "TOTAL_WIDTH|TOTAL_HEIGHT|VISIBLE_WIDTH|VISIBLE_HEIGHT" --include="*.ts" --include="*.tsx" . | grep -v node_modules returns no matches</verify>
  <done>All dimension constants renamed. TypeScript compiles or shows only unrelated errors.</done>
</task>

<task type="auto">
  <name>Task 2: Rename boardOffset to tankRotation</name>
  <files>core/GameEngine.ts, core/commands/actions.ts, core/coordinateTransform.ts, components/GameBoard.tsx</files>
  <action>
    1. Find the state definition for boardOffset (likely in GameEngine or types)
    2. Rename to tankRotation everywhere:
       - GameBoard.tsx (16 refs)
       - actions.ts (7 refs)
       - coordinateTransform.ts (6 refs)
       - Other files as needed

    This represents the cylinder rotation position. The new name clarifies what it does.
  </action>
  <verify>grep -r "boardOffset" --include="*.ts" --include="*.tsx" . | grep -v node_modules returns no matches</verify>
  <done>boardOffset -> tankRotation complete.</done>
</task>

<task type="auto">
  <name>Task 3: Rename GridCell to TankCell and viewport to tankViewport</name>
  <files>types.ts, core/gameLogic.ts, components/goopRenderer.tsx, core/GoalManager.ts</files>
  <action>
    1. In types.ts:
       - Rename interface/type `GridCell` to `TankCell`

    2. Update all GridCell usages (33 refs):
       - gameLogic.ts (15 refs)
       - goopRenderer.tsx (3 refs)
       - GoalManager.ts (3 refs)
       - Other files

    3. Rename `viewport` variable to `tankViewport` in relevant contexts:
       - coordinateTransform.ts (4 refs)
       - coordinates.ts (2 refs)
       - GameEngine.ts (1 ref)
       - Be careful: "viewport" may appear in CSS/React contexts - only rename game-related usages
  </action>
  <verify>grep -r "GridCell" --include="*.ts" --include="*.tsx" . | grep -v node_modules returns no matches</verify>
  <done>GridCell -> TankCell and relevant viewport -> tankViewport complete.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes with no errors
- [ ] `npm run test:run` passes all tests
- [ ] grep for old constants returns no matches
- [ ] grep "boardOffset" returns no matches
- [ ] grep "GridCell" returns no matches
- [ ] Board renders and rotates correctly
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Zero references to old terms
- Tests pass
- TypeScript compiles clean
</success_criteria>

<output>
After completion, create `.planning/phases/23-code-rename/23-03-SUMMARY.md`
</output>
