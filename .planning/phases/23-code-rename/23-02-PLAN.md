---
phase: 23-code-rename
plan: 02
type: execute
---

<objective>
Rename core Goop lifecycle terminology: PieceType/Definition/State and activePiece.

Purpose: Establish the foundational Goop terminology that all other refactors depend on.
Output: All piece-related types renamed to Goop equivalents, TypeScript compiles clean.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/GLOSSARY.md
@.planning/phases/23-code-rename/23-01-SUMMARY.md

**Key files to modify (from audit):**
@constants.ts - PieceType enum (63 refs), PieceDefinition (6 refs)
@types.ts - Type definitions
@core/GameEngine.ts - activePiece state (13 refs)
@core/commands/actions.ts - activePiece usages (16 refs)

**Migration targets:**
- PieceType -> GoopShape (78 total refs)
- PieceDefinition -> GoopTemplate (23 total refs)
- PieceState -> GoopState (13 refs)
- activePiece -> activeGoop (51 refs)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename PieceType enum to GoopShape</name>
  <files>types.ts, constants.ts</files>
  <action>
    1. In types.ts:
       - Find `enum PieceType` or `type PieceType` - rename to `GoopShape`
       - Update any interface properties using PieceType

    2. In constants.ts:
       - Find all `PieceType.X` references - replace with `GoopShape.X`
       - Update PIECE_DEFINITIONS to use GoopShape
       - This is the heaviest file (63 refs)

    Use find-and-replace carefully. Export name must change from PieceType to GoopShape.
  </action>
  <verify>grep -r "PieceType" --include="*.ts" --include="*.tsx" . | grep -v node_modules returns no matches</verify>
  <done>PieceType fully replaced with GoopShape. TypeScript errors expected until related types updated.</done>
</task>

<task type="auto">
  <name>Task 2: Rename PieceDefinition and PieceState</name>
  <files>types.ts, constants.ts, components/*.tsx, core/*.ts</files>
  <action>
    1. In types.ts:
       - Rename `interface PieceDefinition` or `type PieceDefinition` to `GoopTemplate`
       - Rename `enum PieceState` or `type PieceState` to `GoopState`

    2. Across all files:
       - Replace `PieceDefinition` with `GoopTemplate` (23 refs)
       - Replace `PieceState` with `GoopState` (13 refs)
       - Update imports where needed

    Files likely affected: constants.ts, pieceUtils.ts, GameBoard.tsx, gameLogic.ts
  </action>
  <verify>grep -rE "PieceDefinition|PieceState" --include="*.ts" --include="*.tsx" . | grep -v node_modules returns no matches</verify>
  <done>PieceDefinition -> GoopTemplate, PieceState -> GoopState complete.</done>
</task>

<task type="auto">
  <name>Task 3: Rename activePiece to activeGoop</name>
  <files>core/GameEngine.ts, core/commands/actions.ts, components/GameBoard.tsx</files>
  <action>
    1. In GameEngine.ts (13 refs):
       - Rename state field `activePiece` to `activeGoop`
       - Update all internal references

    2. In actions.ts (16 refs):
       - Update all `engine.state.activePiece` to `engine.state.activeGoop`

    3. In GameBoard.tsx (21 refs):
       - Update all `activePiece` props/variables to `activeGoop`

    4. Check and update any other files with activePiece references

    This is a stateful variable, so be thorough - broken references = runtime errors.
  </action>
  <verify>grep -r "activePiece" --include="*.ts" --include="*.tsx" . | grep -v node_modules returns no matches</verify>
  <done>activePiece -> activeGoop complete across all files.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes with no errors
- [ ] `npm run test:run` passes all tests
- [ ] grep -r "PieceType" returns no matches (excluding node_modules)
- [ ] grep -r "PieceDefinition" returns no matches
- [ ] grep -r "PieceState" returns no matches
- [ ] grep -r "activePiece" returns no matches
- [ ] Game starts and pieces spawn correctly
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Zero references to old terms in source code
- Tests pass
- TypeScript compiles clean
</success_criteria>

<output>
After completion, create `.planning/phases/23-code-rename/23-02-SUMMARY.md`
</output>
