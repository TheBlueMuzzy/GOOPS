---
phase: 23-code-rename
plan: 06
type: execute
---

<objective>
Rename Screen/Phase types and Crack system terminology.

Purpose: Establish ScreenType (replacing GamePhase) and update crack terminology.
Output: GamePhase -> ScreenType, crack terms match glossary.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/GLOSSARY.md
@.planning/phases/23-code-rename/23-05-SUMMARY.md

**Key files to modify:**
@types.ts - Enum definitions
@Game.tsx - Screen state management (14 refs)
@core/GameEngine.ts - Phase transitions (10 refs)
@core/CrackManager.ts - Crack logic
@core/GoalManager.ts - Crack tracking

**Migration targets:**
- GamePhase -> ScreenType (42 refs)
- CONSOLE -> ConsoleScreen (enum value)
- GAME_OVER -> EndGameScreen (enum value)
- CrackCell -> Crack (23 refs)
- parentIds -> originCrackId (18 refs)
- childIds -> branchCrackIds (18 refs)
- growthInterval -> crackBranchInterval (6 refs)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename GamePhase enum to ScreenType</name>
  <files>types.ts, Game.tsx, core/GameEngine.ts, core/commands/actions.ts</files>
  <action>
    1. In types.ts:
       - Rename `enum GamePhase` to `ScreenType`
       - Rename enum values:
         - CONSOLE -> ConsoleScreen
         - GAME_OVER -> EndGameScreen
         - Keep PLAYING as TankScreen (or whatever the current playing value is)

    2. Update all usages (42 refs):
       - Game.tsx (14 refs) - screen state management
       - GameEngine.ts (10 refs) - phase transitions
       - actions.ts (4 refs)
       - Other files

    Note: Both the TYPE name and ENUM VALUES change.
  </action>
  <verify>grep -rE "GamePhase|\.CONSOLE[^A-Za-z]|GAME_OVER" --include="*.ts" --include="*.tsx" . | grep -v node_modules returns no matches</verify>
  <done>GamePhase -> ScreenType, enum values updated.</done>
</task>

<task type="auto">
  <name>Task 2: Rename CrackCell to Crack</name>
  <files>types.ts, core/CrackManager.ts, core/GoalManager.ts</files>
  <action>
    1. In types.ts:
       - Rename interface/type `CrackCell` to `Crack`

    2. Update all usages (23 refs):
       - GoalManager.ts (12 refs)
       - CrackManager.ts (4 refs)
       - Test files (2 refs)
       - Other files

    This simplifies the type name - a crack is just a Crack, not a CrackCell.
  </action>
  <verify>grep -r "CrackCell" --include="*.ts" --include="*.tsx" . | grep -v node_modules returns no matches</verify>
  <done>CrackCell -> Crack complete.</done>
</task>

<task type="auto">
  <name>Task 3: Rename crack relationship and timing properties</name>
  <files>types.ts, core/CrackManager.ts, core/GoalManager.ts</files>
  <action>
    1. Rename parentIds -> originCrackId (18 refs):
       - Property on Crack type
       - All usages in CrackManager, GoalManager
       - Note: singular "originCrackId" (one parent per crack)

    2. Rename childIds -> branchCrackIds (18 refs):
       - Property on Crack type
       - All usages tracking crack children

    3. Rename growthInterval -> crackBranchInterval (6 refs):
       - Timing property for crack expansion
       - CrackManager configuration

    These properties track the crack family tree and expansion timing.
  </action>
  <verify>grep -rE "parentIds|childIds|growthInterval" --include="*.ts" --include="*.tsx" . | grep -v node_modules returns no matches</verify>
  <done>Crack relationship and timing properties renamed.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes with no errors
- [ ] `npm run test:run` passes all tests
- [ ] grep "GamePhase" returns no matches
- [ ] grep "CrackCell" returns no matches
- [ ] grep "parentIds|childIds|growthInterval" returns no matches
- [ ] Screen transitions work correctly
- [ ] Cracks spawn and expand correctly
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Zero references to old terms
- Tests pass
- TypeScript compiles clean
</success_criteria>

<output>
After completion, create `.planning/phases/23-code-rename/23-06-SUMMARY.md`
</output>
